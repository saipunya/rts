# Enable rewrite engine
RewriteEngine On

# Set default index files
DirectoryIndex index.php index.html

# Redirect requests that explicitly include .php to the extensionless URL (canonical)
RewriteCond %{THE_REQUEST} \s/([^\s]+)\.php[?\s] [NC]
RewriteRule ^ /%1 [R=301,L]

# If the requested resource is not a real file or directory,
# but the same name with .php exists, internally rewrite to that .php file.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L]
